<%inherit file="base.html"/>

<%def name="head()">
<script>
    function deleteHost(host_name) {
        if (confirm("确认删除吗？")) {
            window.location.href = "/manage/host/delete?host_name=" + host_name;
        }
    }
</script>
</%def>
<%def name="body()">
<div class="panel panel-default">
    <div class="panel-heading"><span class="glyphicon glyphicon-th"></span> 主机列表</div>
    <div class="panel-body">

         <form class="form-horizontal pull-left" role="form" action="/manage/host" method="post">
            ${handler.xsrf_form_html()}
            <div class="form-group">
                <label for="group_name" class="col-md-4 control-label">主机分组</label>
                <div class="col-md-6">
                    <select id="group_name" name="group_name" class="form-control" >
                        <option></option>
                        % for group in groups:
                        <option value="${group.hostgroup_name}" ${group.hostgroup_name == curr_group and "selected" or ""}>${group.alias}</option>
                        % endfor
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-default">查询</button>
                </div>
            </div>
        </form>
        <div class="clearfix"></div>
        <hr>

        <div class="pull-right bottom10">
            <a href="/manage/host/add" class="btn btn-sm btn-default">
                <span class="glyphicon glyphicon-plus"></span> 添加主机
            </a>
        </div>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>主机名称</th>
                <th>主机类型</th>
                <th>主机地址</th>
                <th>主机描述</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            % for host in hosts:

            <tr>
                <td>${host.host_name}</td>
                <td>${host.use}</td>
                <td>${host.address}</td>
                <td>${host.alias}</td>
                <td>
                    <a class="opt-btn btn-default" href="/manage/host/update?host_name=${host.host_name}">修改</a>
                    <a class="opt-btn btn-default" href="/manage/service?host_name=${host.host_name}">服务配置</a>
                    <a class="opt-btn btn-default" href="javascript:deleteHost('${host.host_name}')">删除</a>
                </td>
            </tr>

            % endfor
            </tbody>
        </table>

        
    </div>
</div>
</%def>